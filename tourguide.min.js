var Tourguide=function(){function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function e(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){s(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var o,i,r=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(r.push(o.value),!e||r.length!==e);s=!0);}catch(t){a=!0,i=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var l={exports:{}};!function(t){var e=function t(e,n){return this instanceof t?e instanceof t?e:((e="string"==typeof e?this.select(e,n):e)&&e.nodeName&&(e=[e]),void(this.nodes=this.slice(e))):new t(e,n)};(e.prototype={get length(){return this.nodes.length}}).nodes=[],e.prototype.addClass=function(){return this.eacharg(arguments,(function(t,e){t.classList.add(e)}))},e.prototype.adjacent=function(t,n,o){return"number"==typeof n&&(n=0===n?[]:new Array(n).join().split(",").map(Number.call,Number)),this.each((function(i,r){var s=document.createDocumentFragment();e(n||{}).map((function(n,o){return"string"==typeof(o="function"==typeof t?t.call(this,n,o,i,r):t)?this.generate(o):e(o)})).each((function(t){this.isInPage(t)?s.appendChild(e(t).clone().first()):s.appendChild(t)})),o.call(this,i,s)}))},e.prototype.after=function(t,e){return this.adjacent(t,e,(function(t,e){t.parentNode.insertBefore(e,t.nextSibling)}))},e.prototype.append=function(t,e){return this.adjacent(t,e,(function(t,e){t.appendChild(e)}))},e.prototype.args=function(t,e,n){return(t="string"!=typeof(t="function"==typeof t?t(e,n):t)?this.slice(t).map(this.str(e,n)):t).toString().split(/[\s,]+/).filter((function(t){return t.length}))},e.prototype.array=function(t){var n=this;return this.nodes.reduce((function(o,i,r){var s;return t?(s="string"==typeof(s=(s=t.call(n,i,r))||!1)?e(s):s)instanceof e&&(s=s.nodes):s=i.innerHTML,o.concat(!1!==s?s:[])}),[])},e.prototype.attr=function(t,e,n){return n=n?"data-":"",this.pairs(t,e,(function(t,e){return t.getAttribute(n+e)}),(function(t,e,o){o?t.setAttribute(n+e,o):t.removeAttribute(n+e)}))},e.prototype.before=function(t,e){return this.adjacent(t,e,(function(t,e){t.parentNode.insertBefore(e,t)}))},e.prototype.children=function(t){return this.map((function(t){return this.slice(t.children)})).filter(t)},e.prototype.clone=function(){return this.map((function(t,e){var n=t.cloneNode(!0),o=this.getAll(n);return this.getAll(t).each((function(t,e){for(var n in this.mirror)this.mirror[n]&&this.mirror[n](t,o.nodes[e])})),n}))},e.prototype.getAll=function(t){return e([t].concat(e("*",t).nodes))},e.prototype.mirror={},e.prototype.mirror.events=function(t,n){if(t._e)for(var o in t._e)t._e[o].forEach((function(t){e(n).on(o,t.callback)}))},e.prototype.mirror.select=function(t,n){e(t).is("select")&&(n.value=t.value)},e.prototype.mirror.textarea=function(t,n){e(t).is("textarea")&&(n.value=t.value)},e.prototype.closest=function(t){return this.map((function(n){do{if(e(n).is(t))return n}while((n=n.parentNode)&&n!==document)}))},e.prototype.data=function(t,e){return this.attr(t,e,!0)},e.prototype.each=function(t){return this.nodes.forEach(t.bind(this)),this},e.prototype.eacharg=function(t,e){return this.each((function(n,o){this.args(t,n,o).forEach((function(t){e.call(this,n,t)}),this)}))},e.prototype.empty=function(){return this.each((function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}))},e.prototype.filter=function(t){var n=t instanceof e?function(e){return-1!==t.nodes.indexOf(e)}:"function"==typeof t?t:function(e){return e.matches=e.matches||e.msMatchesSelector||e.webkitMatchesSelector,e.matches(t||"*")};return e(this.nodes.filter(n))},e.prototype.find=function(t){return this.map((function(n){return e(t||"*",n)}))},e.prototype.first=function(){return this.nodes[0]||!1},e.prototype.generate=function(t){return/^\s*<tr[> ]/.test(t)?e(document.createElement("table")).html(t).children().children().nodes:/^\s*<t(h|d)[> ]/.test(t)?e(document.createElement("table")).html(t).children().children().children().nodes:/^\s*</.test(t)?e(document.createElement("div")).html(t).children().nodes:document.createTextNode(t)},e.prototype.handle=function(){var t=this.slice(arguments).map((function(t){return"function"==typeof t?function(e){e.preventDefault(),t.apply(this,arguments)}:t}),this);return this.on.apply(this,t)},e.prototype.hasClass=function(){return this.is("."+this.args(arguments).join("."))},e.prototype.html=function(t){return void 0===t?this.first().innerHTML||"":this.each((function(e){e.innerHTML=t}))},e.prototype.is=function(t){return 0<this.filter(t).length},e.prototype.isInPage=function(t){return t!==document.body&&document.body.contains(t)},e.prototype.last=function(){return this.nodes[this.length-1]||!1},e.prototype.map=function(t){return t?e(this.array(t)).unique():this},e.prototype.not=function(t){return this.filter((function(n){return!e(n).is(t||!0)}))},e.prototype.off=function(t,n,o){var i=null==n&&null==o,r=null,s=n;return"string"==typeof n&&(r=n,s=o),this.eacharg(t,(function(t,n){e(t._e?t._e[n]:[]).each((function(e){(i||e.orig_callback===s&&e.selector===r)&&t.removeEventListener(n,e.callback)}))}))},e.prototype.on=function(t,n,o){function i(t,e){try{Object.defineProperty(t,"currentTarget",{value:e,configurable:!0})}catch(t){}}var r=null,s=n;function a(t){return n.apply(this,[t].concat(t.detail||[]))}return"string"==typeof n&&(r=n,s=o,n=function(t){var n=arguments;e(t.currentTarget).find(r).each((function(e){var r;e.contains(t.target)&&(r=t.currentTarget,i(t,e),o.apply(e,n),i(t,r))}))}),this.eacharg(t,(function(t,e){t.addEventListener(e,a),t._e=t._e||{},t._e[e]=t._e[e]||[],t._e[e].push({callback:a,orig_callback:s,selector:r})}))},e.prototype.pairs=function(t,e,o,i){var r;return void 0!==e&&(r=t,(t={})[r]=e),"object"==n(t)?this.each((function(e,n){for(var o in t)"function"==typeof t[o]?i(e,o,t[o](e,n)):i(e,o,t[o])})):this.length?o(this.first(),t):""},e.prototype.param=function(t){return Object.keys(t).map(function(e){return this.uri(e)+"="+this.uri(t[e])}.bind(this)).join("&")},e.prototype.parent=function(t){return this.map((function(t){return t.parentNode})).filter(t)},e.prototype.prepend=function(t,e){return this.adjacent(t,e,(function(t,e){t.insertBefore(e,t.firstChild)}))},e.prototype.remove=function(){return this.each((function(t){t.parentNode&&t.parentNode.removeChild(t)}))},e.prototype.removeClass=function(){return this.eacharg(arguments,(function(t,e){t.classList.remove(e)}))},e.prototype.replace=function(t,n){var o=[];return this.adjacent(t,n,(function(t,e){o=o.concat(this.slice(e.children)),t.parentNode.replaceChild(e,t)})),e(o)},e.prototype.scroll=function(){return this.first().scrollIntoView({behavior:"smooth"}),this},e.prototype.select=function(t,n){return t=t.replace(/^\s*/,"").replace(/\s*$/,""),/^</.test(t)?e().generate(t):(n||document).querySelectorAll(t)},e.prototype.serialize=function(){var t=this;return this.slice(this.first().elements).reduce((function(n,o){return!o.name||o.disabled||"file"===o.type||/(checkbox|radio)/.test(o.type)&&!o.checked?n:"select-multiple"===o.type?(e(o.options).each((function(e){e.selected&&(n+="&"+t.uri(o.name)+"="+t.uri(e.value))})),n):n+"&"+t.uri(o.name)+"="+t.uri(o.value)}),"").slice(1)},e.prototype.siblings=function(t){return this.parent().children(t).not(this)},e.prototype.size=function(){return this.first().getBoundingClientRect()},e.prototype.slice=function(t){return t&&0!==t.length&&"string"!=typeof t&&"[object Function]"!==t.toString()?t.length?[].slice.call(t.nodes||t):[t]:[]},e.prototype.str=function(t,e){return function(n){return"function"==typeof n?n.call(this,t,e):n.toString()}},e.prototype.text=function(t){return void 0===t?this.first().textContent||"":this.each((function(e){e.textContent=t}))},e.prototype.toggleClass=function(t,e){return!!e===e?this[e?"addClass":"removeClass"](t):this.eacharg(t,(function(t,e){t.classList.toggle(e)}))},e.prototype.trigger=function(t){var e=this.slice(arguments).slice(1);return this.eacharg(t,(function(t,n){var o,i={bubbles:!0,cancelable:!0,detail:e};try{o=new window.CustomEvent(n,i)}catch(t){(o=document.createEvent("CustomEvent")).initCustomEvent(n,!0,!0,e)}t.dispatchEvent(o)}))},e.prototype.unique=function(){return e(this.nodes.reduce((function(t,e){return null!=e&&!1!==e&&-1===t.indexOf(e)?t.concat(e):t}),[]))},e.prototype.uri=function(t){return encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},e.prototype.wrap=function(t){return this.map((function(n){return e(t).each((function(t){(function(t){for(;t.firstElementChild;)t=t.firstElementChild;return e(t)})(t).append(n.cloneNode(!0)),n.parentNode.replaceChild(t,n)}))}))},t.exports&&(t.exports=e,t.exports.u=e)}(l);var u=l.exports,h="complete",p="canceled";function d(t,e,n){t.self===t?t.scrollTo(e,n):(t.scrollLeft=e,t.scrollTop=n)}function f(t){var e=t._scrollSettings;if(e){var n=e.maxSynchronousAlignments,o=function(t,e){var n,o,i,r,s,a,c,l=t.align,u=t.target.getBoundingClientRect(),h=l&&null!=l.left?l.left:.5,p=l&&null!=l.top?l.top:.5,d=l&&null!=l.leftOffset?l.leftOffset:0,f=l&&null!=l.topOffset?l.topOffset:0,g=h,v=p;if(t.isWindow(e))a=Math.min(u.width,e.innerWidth),c=Math.min(u.height,e.innerHeight),o=u.left+e.pageXOffset-e.innerWidth*g+a*g,i=u.top+e.pageYOffset-e.innerHeight*v+c*v,o-=d,i-=f,o=t.align.lockX?e.pageXOffset:o,i=t.align.lockY?e.pageYOffset:i,r=o-e.pageXOffset,s=i-e.pageYOffset;else{a=u.width,c=u.height,n=e.getBoundingClientRect();var y=u.left-(n.left-e.scrollLeft),m=u.top-(n.top-e.scrollTop);o=y+a*g-e.clientWidth*g,i=m+c*v-e.clientHeight*v,o-=d,i-=f,o=Math.max(Math.min(o,e.scrollWidth-e.clientWidth),0),i=Math.max(Math.min(i,e.scrollHeight-e.clientHeight),0),o=t.align.lockX?e.scrollLeft:o,i=t.align.lockY?e.scrollTop:i,r=o-e.scrollLeft,s=i-e.scrollTop}return{x:o,y:i,differenceX:r,differenceY:s}}(e,t),i=Date.now()-e.startTime,r=Math.min(1/e.time*i,1);if(e.endIterations>=n)return d(t,o.x,o.y),t._scrollSettings=null,e.end(h);var s=1-e.ease(r);if(d(t,o.x-o.differenceX*s,o.y-o.differenceY*s),i>=e.time)return e.endIterations++,e.scrollAncestor&&f(e.scrollAncestor),void f(t);!function(t){if("requestAnimationFrame"in window)return window.requestAnimationFrame(t);setTimeout(t,16)}(f.bind(null,t))}}function g(t){return t.self===t}function v(t){return"pageXOffset"in t||(t.scrollHeight!==t.clientHeight||t.scrollWidth!==t.clientWidth)&&"hidden"!==getComputedStyle(t).overflow}function y(){return!0}function m(t){if(t.assignedSlot)return m(t.assignedSlot);if(t.parentElement)return"BODY"===t.parentElement.tagName?t.parentElement.ownerDocument.defaultView||t.parentElement.ownerDocument.ownerWindow:t.parentElement;if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e.host}}var b=function(t,e,n){if(t){"function"==typeof e&&(n=e,e=null),e||(e={}),e.time=isNaN(e.time)?1e3:e.time,e.ease=e.ease||function(t){return 1-Math.pow(1-t,t/2)},e.align=e.align||{};var o=m(t),i=1,r=e.validTarget||y,s=e.isScrollable;e.debug&&(console.log("About to scroll to",t),o||console.error("Target did not have a parent, is it mounted in the DOM?"));for(var a=[];o;)if(e.debug&&console.log("Scrolling parent node",o),r(o,i)&&(s?s(o,v):v(o))&&(i++,a.push(o)),!(o=m(o))){c(h);break}return a.reduce((function(n,o,i){return function(t,e,n,o,i){var r,s=!e._scrollSettings,a=e._scrollSettings,c=Date.now(),l={passive:!0};function u(t){e._scrollSettings=null,e.parentElement&&e.parentElement._scrollSettings&&e.parentElement._scrollSettings.end(t),n.debug&&console.log("Scrolling ended with type",t,"for",e),i(t),r&&(e.removeEventListener("touchstart",r,l),e.removeEventListener("wheel",r,l))}a&&a.end(p);var h=n.maxSynchronousAlignments;return null==h&&(h=3),e._scrollSettings={startTime:c,endIterations:0,target:t,time:n.time,ease:n.ease,align:n.align,isWindow:n.isWindow||g,maxSynchronousAlignments:h,end:u,scrollAncestor:o},"cancellable"in n&&!n.cancellable||(r=u.bind(null,p),e.addEventListener("touchstart",r,l),e.addEventListener("wheel",r,l)),s&&f(e),r}(t,o,e,a[i+1],c)}),null)}function c(t){--i||n&&n(t)}};function w(t,e,n){return e=isNaN(e)?t:e,n=isNaN(n)?t:n,Math.max(e,Math.min(t,n))}function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float";if("number"==typeof t)return t;var n=0;try{n="int"===e?Number.parseInt(t):Number.parseFloat(t)}catch(t){n=0}return Number.isNaN(n)?0:n}function k(t){return t&&null!==t.offsetParent}function x(t,e){var n=u(t).size(),o=C(e);return{width:n.width,height:n.height,top:n.top+o.scrollY-o.rootTop,bottom:n.bottom+o.scrollY-o.rootTop,left:n.left+o.scrollX-o.rootLeft,right:n.right+o.scrollX-o.rootLeft,viewTop:n.top,viewBottom:n.bottom,viewLeft:n.left,viewRight:n.right}}function C(t){try{var e=u(t).first(),n=u(t).size();return{width:window.innerWidth,height:window.innerHeight,scrollX:e.scrollLeft,scrollY:e.scrollTop,rootWidth:n.width,rootHeight:n.height,rootTop:n.top+window.pageYOffset,rootLeft:n.left+window.pageXOffset}}catch(e){throw console.error(e),Error("element is invalid: ".concat(t))}}function S(t,e){var n=u(t).first();if(window.getComputedStyle)try{return getComputedStyle(n).getPropertyValue(e)}catch(t){return""}else if(n.currentStyle)try{return n.currentStyle[e]}catch(t){return""}return""}var j=["top","left","right","bottom","width","height","maxWidth","minWidth","transform"];function O(t,e){if("[object Object]"!==!Object.prototype.toString.call(e)){var n=u(t).first().style;Object.entries(e).filter((function(t){var e=a(t,2),n=e[0],o=e[1];return j.includes(n)&&("number"==typeof o||"string"==typeof o)})).forEach((function(t){var e=a(t,2),o=e[0],i=e[1],r="number"==typeof i?"".concat(i,"px"):i;switch(o){case"top":n.top=r;break;case"left":n.left=r;break;case"right":n.right=r;break;case"bottom":n.bottom=r;break;case"width":n.width=r;break;case"height":n.height=r;break;case"maxWidth":n.maxWidth=r;break;case"minWidth":n.minWidth=r;break;case"transform":n.transform=r}}))}}function N(t,e,n){t.self===t?t.scrollTo(e,n):(t.scrollLeft=e,t.scrollTop=n)}function E(t,e){var n=Date.now();function o(t,i,r){if(t){var s,a=Date.now()-n,c=Math.min(1/e*a,1),l=1-(s=c,1-Math.pow(1-s,s/2));N(t,i-(i-t.scrollLeft)*l,r-(r-t.scrollTop)*l),a>=e?N(t,i,r):function(t){if("requestAnimationFrame"in window)return window.requestAnimationFrame(t);setTimeout(t,16)}(o.bind(null,t,i,r))}else console.warn("target element ".concat(t," not found, skip"))}t.forEach((function(t){o(t.element,t.x,t.y)}))}function T(t){var e=[],n=u(t);do{n||(n=!1),n.first()||(n=!1);try{var o=n.first();o.scrollHeight===o.height&&o.scrollWidth===o.width||e.push({element:n.first(),x:n.first().scrollLeft,y:n.first().scrollTop}),n=n.parent()}catch(t){n=!1}}while(n);return e}var L={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function A(t){return t.replace(RegExp("^"+(t.match(/^(\t| )+/)||"")[0],"gm"),"")}function H(t){return(t+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function W(t,e){var n,o,i,r,s,a=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,c=[],l="",u=e||{},h=0;function p(t){var e=L[t[1]||""],n=c[c.length-1]==t;return e?e[1]?(n?c.pop():c.push(t),e[0|n]):e[0]:t}function d(){for(var t="";c.length;)t+=p(c[c.length-1]);return t}for(t=t.replace(/^\[(.+?)\]:\s*(.+)$/gm,(function(t,e,n){return u[e.toLowerCase()]=n,""})).replace(/^\n+|\n+$/g,"");i=a.exec(t);)o=t.substring(h,i.index),h=a.lastIndex,n=i[0],o.match(/[^\\](\\\\)*\\$/)||((s=i[3]||i[4])?n='<pre class="code '+(i[4]?"poetry":i[2].toLowerCase())+'"><code'+(i[2]?' class="language-'+i[2].toLowerCase()+'"':"")+">"+A(H(s).replace(/^\n+|\n+$/g,""))+"</code></pre>":(s=i[6])?(s.match(/\./)&&(i[5]=i[5].replace(/^\d+/gm,"")),r=W(A(i[5].replace(/^\s*[>*+.-]/gm,""))),">"==s?s="blockquote":(s=s.match(/\./)?"ol":"ul",r=r.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),n="<"+s+">"+r+"</"+s+">"):i[8]?n='<img src="'+H(i[8])+'" alt="'+H(i[7])+'">':i[10]?(l=l.replace("<a>",'<a href="'+H(i[11]||u[o.toLowerCase()])+'">'),n=d()+"</a>"):i[9]?n="<a>":i[12]||i[14]?n="<"+(s="h"+(i[14]?i[14].length:i[13]>"="?1:2))+">"+W(i[12]||i[15],u)+"</"+s+">":i[16]?n="<code>"+H(i[16])+"</code>":(i[17]||i[1])&&(n=p(i[17]||"--"))),l+=o,l+=n;return(l+t.substring(h)+d()).replace(/^\n+|\n+$/g,"")}function B(t){var e="";return"string"==typeof t?e=t:"object"===n(t)&&(e=t.type),e}var M=function(){function t(i,r){var s,a=this;if(o(this,t),this.index=0,this.image=null,this.title="",this.content="",this.active=!1,this.first=!1,this.last=!1,this.container=null,this.highlight=null,this.tooltip=null,this.arrow=null,this.context=r,this._target=null,this._timerHandler=null,this._scrollCancel=null,i instanceof HTMLElement)this.target=i,s=function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(";"),o=e({},t);return n.forEach((function(t){var e=(t||"").split(":");o[(e[0]||"").trim()]=(e[1]||"").trim()})),o}(u(i).data("tour"));else{if(!(Object.prototype.hasOwnProperty.call(i,"title")&&Object.prototype.hasOwnProperty.call(i,"content")&&Object.prototype.hasOwnProperty.call(i,"step")))throw new Error("invalid step parameter:\n"+JSON.stringify(i,null,2)+"\nsee this doc for more detail: https://github.com/LikaloLLC/tourguide.js#json-based-approach");s=i,this._selector=i.selector}if(this.index=parseInt(s.step),this.title=s.title,this.content=W(s.content),this.image=s.image,s.image&&r.options.preloadimages&&!/^data:/i.test(s.image)){var c=new Image;c.onerror=function(){console.error(new Error("image is not valid: ".concat(s.image))),a.image=null},c.src=this.image}this.actions=[],s.actions&&(Array.isArray(s.actions)?this.actions=s.actions:console.error(new Error("actions must be array but got ".concat(n(s.actions)))))}return r(t,[{key:"el",get:function(){var t=this;if(!this.container){var e=u('<div role="figure" class="guided-tour-step-image">'.concat(this.image?'<img src="'.concat(this.image,'" />'):"","</div>")),n=u('<div role="heading" class="guided-tour-step-title">'.concat(this.title,"</div>")),o=u('<div class="guided-tour-step-content">'.concat(this.content,"</div>")),i=u('<div class="guided-tour-step-footer">\n                <span role="button" class="guided-tour-step-button guided-tour-step-button-close" title="End tour">\n                    <svg class="guided-tour-icon" viewBox="0 0 20 20" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#tour-icon-close"></use></svg>\n                </span>\n                '.concat(this.first?"":'<span role="button" class="guided-tour-step-button guided-tour-step-button-prev" title="Prev step">\n                  <svg class="guided-tour-icon" viewBox="0 0 20 20" width="32" height="32">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#tour-icon-prev"></use>\n                  </svg>\n                </span>',"\n                ").concat(this.last?'<span role="button" class="guided-tour-step-button guided-tour-step-button-complete" title="Complete tour">\n                  <svg class="guided-tour-icon" viewBox="0 0 20 20" width="32" height="32">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#tour-icon-complete"></use>\n                  </svg>\n                </span>':'<span role="button" class="guided-tour-step-button guided-tour-step-button-next" title="Next step">\n                  <svg class="guided-tour-icon" viewBox="0 0 20 20" width="32" height="32">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#tour-icon-next"></use>\n                  </svg>\n                </span>',"\n                ").concat(this.context._steps.length>1?'<div class="guided-tour-step-bullets">\n                    <ul>'.concat(this.context._steps.map((function(e,n){return'<li  title="Go to step '.concat(n+1,'" data-index="').concat(n,'" class="').concat(e.index<t.index?"complete":e.index===t.index?"current":"",'"></li>')})).join(""),"</ul>\n                </div>"):"","\n            </div>"));i.find(".guided-tour-step-button-prev").on("click",this.context.previous),i.find(".guided-tour-step-button-next").on("click",this.context.next),i.find(".guided-tour-step-button-close").on("click",this.context.stop),i.find(".guided-tour-step-button-complete").on("click",this.context.complete),i.find(".guided-tour-step-bullets li").on("click",(function(e){return t.context.go(parseInt(u(e.target).data("index")))}));var r=this.highlight=u('<div class="guided-tour-step-highlight"></div>'),s=this.tooltip=u('<div role="tooltip" class="guided-tour-step-tooltip"></div>'),a=u('<div class="guided-tour-step-tooltip-inner"></div>'),c=this.arrow=u('<div aria-hidden="true" class="guided-tour-arrow"><div aria-hidden="true" class="guided-tour-arrow-inner"></div></div>');a.append(c).append(e).append(n).append(o).append(i),s.append(a),this.container=u('<div role="dialog" class="guided-tour-step'.concat(this.first?" guided-tour-step-first":"").concat(this.last?" guided-tour-step-last":"",'"></div>')),this.container.append(r).append(s)}return this.container}},{key:"target",get:function(){return this._target||this._selector&&u(this._selector).first()},set:function(t){this._target=t}},{key:"attach",value:function(t){u(t).append(this.el)}},{key:"remove",value:function(){this.hide(),this.el.remove()}},{key:"position",value:function(){var t=C(this.context._options.root);if(k(this.target)){var e=this.highlight,n=this.tooltip,o=this.arrow,i={},r={},s={},a=x(this.target,this.context._options.root),c=x(n,this.context._options.root);i.top=a.top-this.context.options.padding,i.left=a.left-this.context.options.padding,i.width=a.width+2*this.context.options.padding,i.height=a.height+2*this.context.options.padding;var l=_(S(n,"margin-top"))+_(S(n,"margin-bottom")),u=_(S(n,"margin-left"))+_(S(n,"margin-right")),h=0,p=0;t.height-a.viewBottom>c.height+l||a.viewTop<c.height+l?(r.top=a.top+a.height,r.bottom="unset",n.addClass("guided-tour-arrow-top"),h=_(S(n,"border-top-left-radius")),p=_(S(n,"border-top-right-radius"))):(r.bottom=t.rootHeight-a.top,r.top="unset",n.addClass("guided-tour-arrow-bottom"),h=_(S(n,"border-bottom-left-radius")),p=_(S(n,"border-bottom-right-radius")));var d=x(o,this.context._options.root);t.width-a.left>c.width+u||a.right<c.width+u?(r.left=a.left,r.right="unset",a.width/2>c.width?s.right=8:s.left=w(a.width/2,h+2,c.width-d.width-p-2)):(r.right=t.rootWidth-a.right,r.left="unset",a.width/2>c.width?s.left=18:s.right=w(a.width/2,p+2,c.width-d.width-h-2)),O(e,i),O(n,r),O(o,s),n.first().style.opacity=.1}else{var f=this.highlight,g=this.tooltip,v=x(g,this.context._options.root),y={},m={};y.top=0,y.left=0,y.width=0,y.height=0,m.top=t.height/2+t.scrollY-t.rootTop-v.height/2,m.left=t.width/2+t.scrollX-t.rootLeft-v.width/2,m.bottom="unset",m.right="unset",g.addClass("guided-tour-arrow-none"),O(f,y),O(g,m),f.first().style.boxShadow="none",g.first().style.opacity=.1,this.context._overlay.show()}}},{key:"adjust",value:function(){var t=C(this.context._options.root),e=this.tooltip,n=x(e,this.context._options.root),o={};n.viewTop<8?(o.top=8-n.viewTop+n.top,o.bottom="unset"):n.viewBottom+8>t.height&&(o.top="unset",o.bottom=t.rootHeight-(n.bottom-(n.viewBottom+8-t.height))),n.viewLeft<32?(o.left=32-n.viewLeft+n.left,o.right="unset"):n.viewRight+32>t.width&&(o.left="unset",o.right=t.rootWidth-(n.right-(n.viewRight+32-t.width))),O(e,o),e.first().style.opacity=1}},{key:"cancel",value:function(){this._timerHandler&&clearTimeout(this._timerHandler),this._scrollCancel&&this._scrollCancel()}},{key:"show",value:function(){var t,e=this;if(this.cancel(),!this.active){var o=function(){e.el.addClass("active"),e.context._overlay.hide(),e.position(),e.adjust(),k(e.target)&&("static"===S(e.target,"position")&&(e.target.style.position="relative"),u(e.target).addClass("guided-tour-target")),e.actions.forEach((function(t){try{var o=B(t.event);if(o){t.handler=function(o){var i;t&&(!("object"===n(i=t.event)?Object.entries(i).map((function(t){var e=a(t,2);return{key:e[0],value:e[1]}})):[]).filter((function(t){return o[t.key]!==t.value})).length&&e.context.action(o,t))},t.target=t.target||e.target,u(t.target).on(o,t.handler)}else console.warn("Wrong event on action.event: ".concat(t.event," on step #").concat(e.index))}catch(n){console.warn("Could not find action.target: ".concat(t.target," on step #").concat(e.index)),console.warn(n)}})),e.active=!0};return k(this.target)?this._scrollCancel=b(this.target,{time:this.context.options.animationspeed,cancellable:!1,align:{top:(t=this.context.options.align,"top"===t?.1:"bottom"===t?.9:"center"===t?.5:0),left:.5}},o):this._timerHandler=setTimeout(o,this.context.options.animationspeed),!0}return!1}},{key:"hide",value:function(){return this.cancel(),!!this.active&&(k(this.target)&&u(this.target).removeClass("guided-tour-target"),this.el.removeClass("active"),this.tooltip.removeClass("guided-tour-arrow-top"),this.tooltip.removeClass("guided-tour-arrow-bottom"),this.context._overlay.show(),this.actions.forEach((function(t){try{var e=B(t.event);e&&u(t.target).off(e,t.handler)}catch(t){console.warn(t)}})),this.active=!1,!0)}},{key:"toJSON",value:function(){return{index:this.index,title:this.title,content:this.content,image:this.image,active:this.active}}}]),t}(),P=function(){function t(e){o(this,t),this.context=e,this.container=null,this.active=!1}return r(t,[{key:"el",get:function(){return this.container||(this.container=u('<div role="dialog" class="guided-tour-overlay"></div>')),this.container}},{key:"attach",value:function(t){u(t).append(this.el)}},{key:"remove",value:function(){this.hide(),this.el.remove()}},{key:"show",value:function(){return!this.active&&(this.el.addClass("active"),this.active=!0,!0)}},{key:"hide",value:function(){return!!this.active&&(this.el.removeClass("active"),this.active=!1,!0)}},{key:"toJSON",value:function(){return{active:this.active}}}]),t}(),I=0,D=1,X=2;function Y(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"keyup";if("object"===n(t)){var r={type:i};if("number"==typeof o)r.keyCode=o;else if("string"==typeof o)r.key=o;else{if("object"!==n(o))throw new Error("keyboardNavigation option invalid. should be predefined object or false. Check documentation.");r=e(e({},o),{},{type:i})}var s=Object.entries(r).map((function(t){var e=a(t,2);return{key:e[0],value:e[1]}}));return!s.filter((function(e){return t[e.key]!==e.value})).length}return!1}var q=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r={next:"ArrowRight",prev:"ArrowLeft",first:"Home",last:"End",complete:null,stop:"Escape"},s={overlay:"rgba(0, 0, 0, 0.5)",background:"#fff",bullet:"#9ca3af",bulletVisited:"#aaa",bulletCurrent:"#39464e",stepButtonPrev:"#6b7280",stepButtonNext:"#111827",stepButtonComplete:"#111827"};if(this._options=Object.assign({root:"body",selector:"[data-tour]",animationspeed:300,padding:5,steps:null,src:null,restoreinitialposition:!0,preloadimages:!1,request:{options:{mode:"cors",cache:"no-cache"},headers:{"Content-Type":"application/json"}},align:"top",keyboardNavigation:r,onStart:function(){},onStop:function(){},onComplete:function(){},onStep:function(){},onAction:function(){}},i,{colors:Object.assign(s,i.colors||{})}),this._overlay=null,this._steps=[],this._current=0,this._active=!1,this._stepsSrc=I,this._ready=!1,this._initialposition=null,this._injectIcons(),"object"===n(this._options.steps)&&Array.isArray(this._options.steps))this._stepsSrc=D,this._steps=this._options.steps.map((function(t){return new M(t,e)})),this._ready=!0;else if("string"==typeof this._options.src)this._stepsSrc=X,fetch(new Request(this._options.src,this._options.request)).then((function(t){return t.json().then((function(t){e._steps=t.map((function(t){return new M(t,e)})),e._ready=!0}))}));else{if(!(u(this._options.selector).length>0))throw new Error("Tour is not configured properly. Check documentation.");this._stepsSrc=I,this._ready=!0}this.start=this.start.bind(this),this.next=this.next.bind(this),this.previous=this.previous.bind(this),this.go=this.go.bind(this),this.stop=this.stop.bind(this),this.complete=this.complete.bind(this),this.action=this.action.bind(this),this._keyboardHandler=this._keyboardHandler.bind(this)}return r(t,[{key:"currentstep",get:function(){return this._steps[this._current]}},{key:"length",get:function(){return this._steps.length}},{key:"steps",get:function(){return this._steps.map((function(t){return t.toJSON()}))}},{key:"hasnext",get:function(){return this.nextstep!==this._current}},{key:"nextstep",get:function(){return w(this._current+1,0,this.length-1)}},{key:"previousstep",get:function(){return w(this._current-1,0)}},{key:"options",get:function(){return this._options}},{key:"_injectIcons",value:function(){0===u("#GuidedTourIconSet").length&&u("body").append(u('<svg id="GuidedTourIconSet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display: none;">\n<symbol id="tour-icon-close" viewBox="0 0 20 20"><path d="M16,16 L4,4" fill="none" stroke="currentColor" stroke-width="1"></path><path d="M16,4 L4,16" fill="none" stroke="currentColor" stroke-width="1"></path></symbol>\n<symbol id="tour-icon-next" viewBox="0 0 20 20"><polyline points="7 4 13 10 7 16" fill="none" stroke="currentColor" stroke-width="1"></polyline></symbol>\n<symbol id="tour-icon-prev" viewBox="0 0 20 20"><polyline points="12 4 6 10 12 16" fill="none" stroke="currentColor" stroke-width="1"></polyline></symbol>\n<symbol id="tour-icon-complete" viewBox="0 0 20 20"><polyline points="4,10 8,15 17,4" fill="none" stroke="currentColor" stroke-width="1"></polyline></symbol>\n</svg>'))}},{key:"_injectStyles",value:function(){this._removeStyles();var t=u('<style id="tourguide-color-schema">'.concat(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"--tourguide",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:":root",o=[];return Object.entries(t).forEach((function(t){for(var n=a(t,2),i=n[0],r=n[1],s=[e],c=0,l=0;l<i.length;l+=1)i[l]>="A"&&i[l]<="Z"&&(s.push(i.substring(c,l).toLowerCase()),c=l);s.push(i.substring(c,i.length).toLowerCase()),o.push("".concat(s.join("-"),": ").concat(r))})),"".concat(n," {\n").concat(o.join(";\n"),";\n}")}(this._options.colors,"--tourguide"),"</style>"));u(":root > head").append(t)}},{key:"_removeStyles",value:function(){var t=u("style#tourguide-color-schema");t.length>0&&t.remove()}},{key:"_keyboardHandler",value:function(t){this._options.keyboardNavigation.next&&Y(t,this._options.keyboardNavigation.next)?this.next():this._options.keyboardNavigation.prev&&Y(t,this._options.keyboardNavigation.prev)?this.previous():this._options.keyboardNavigation.first&&Y(t,this._options.keyboardNavigation.first)?this.go(0):this._options.keyboardNavigation.last&&Y(t,this._options.keyboardNavigation.last)?this.go(this._steps.length-1):this._options.keyboardNavigation.stop&&Y(t,this._options.keyboardNavigation.stop)?this.stop():this._options.keyboardNavigation.complete&&Y(t,this._options.keyboardNavigation.complete)&&this.complete()}},{key:"init",value:function(){var t=this;if(this.reset(),u(this._options.root).addClass("guided-tour"),this._overlay=new P(this),this._stepsSrc===I){var e=u(this._options.selector).nodes;this._steps=e.map((function(e){return new M(e,t)}))}this._steps=this._steps.sort((function(t,e){return t.index-e.index})),this._steps[0].first=!0,this._steps[this.length-1].last=!0}},{key:"reset",value:function(){this._active&&this.stop(),this._stepsSrc===I&&(this._steps=[]),this._current=0}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._ready){if(this._injectStyles(),this._options.restoreinitialposition&&(this._initialposition=T(this._options.root)),this._active)this.go(e,"start");else if(u(this._options.root).addClass("guided-tour"),this.init(),this._overlay.attach(this._options.root),this._steps.forEach((function(e){return e.attach(t._options.root)})),this._current=e,this.currentstep.show(),this._active=!0,this._options.onStart(this._options),this._options.keyboardNavigation){if("[object Object]"!==Object.prototype.toString.call(this._options.keyboardNavigation))throw new Error("keyboardNavigation option invalid. should be predefined object or false. Check documentation.");u(":root").on("keyup",this._keyboardHandler)}}else setTimeout((function(){t.start(e)}),50)}},{key:"action",value:function(t,e){if(this._active){var n=this.currentstep;"function"==typeof e.act?e.act(t,n.toJSON(),this,e):"number"==typeof e.act?this.go(e.act,"action"):"next"===e.act?this.next():"previous"===e.act?this.previous():"stop"===e.act?this.stop():"complete"===e.act&&this.complete(),this._options.onAction&&"function"==typeof this._options.onAction&&this._options.onAction(t,n.toJSON(),e)}}},{key:"next",value:function(){this._active&&this.go(this.nextstep,"next")}},{key:"previous",value:function(){this._active&&this.go(this.previousstep,"previous")}},{key:"go",value:function(t,e){this._active&&this._current!==t&&(this.currentstep.hide(),this._current=w(t,0,this.length-1),this.currentstep.show(),this._options.onStep(this.currentstep,e))}},{key:"stop",value:function(){this._removeStyles(),this._active&&(this.currentstep.hide(),this._active=!1,this._overlay.remove(),this._steps.forEach((function(t){return t.remove()})),u(this._options.root).removeClass("guided-tour"),this._options.keyboardNavigation&&u(":root").off("keyup",this._keyboardHandler),this._options.restoreinitialposition&&this._initialposition&&E(this._initialposition,this._options.animationspeed),this._options.onStop(this._options))}},{key:"complete",value:function(){this._active&&(this.stop(),this._options.onComplete())}}]),t}();return q}();
